---
title: "About this site"
site: distill::distill_website
preview: img/wch-map.png
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

source(here::here("R/build/attach-packages.R"))
source(here::here("R/build/utils.R"))
source(here::here("R/build/load-data.R"))
```

```{r}
nys_date <- nys_cases %>% 
  filter(date == max(date)) %>% 
  distinct(date) %>% 
  pull()

nyt_date <- nyt_cases %>%
  filter(date == max(date)) %>% 
  distinct(date) %>% 
  pull()

mun_date <- mun_cases %>% 
  filter(date == max(date)) %>% 
  distinct(date) %>% 
  pull()

hosp_date <- hosp_cap %>% 
  filter(year_week == max(year_week)) %>% 
  distinct(year_week) %>% 
  pull()
```

This site contains information about the Covid-19 pandemic in Westchester County, NY and the surrounding metropolitan area. The [Westchester County Department of Health website](https://health.westchestergov.com/2019-novel-coronavirus) does not provide much data or detailed information about the state of the pandemic in the county, so this site hopes to fill the gap.

## Data sources

### [New York State Statewide Covid-19 Testing](https://health.data.ny.gov/Health/New-York-State-Statewide-COVID-19-Testing/xdss-u53e)

*New York State Department of Health*

This dataset includes the number of **tests** and **positive cases** of Covid-19 in New York State. The data is reported by county. It is updated daily and includes all tests reported by the end of the prior day. Tests include those administered by clinical laboratories as well as pooled or batch tests reported by colleges and universities.

Tests are assigned to a county based on the patient's address. If that cannot be determined, the address of the health care provider who ordered the test is used.

If a person has multiple specimens tested on the same day, they are only counted as one test. If a person is tested on multiple days, each day's test will be counted separately. An individual will only be counted positive one time, regardless of the number of positive tests that individual has.

Most recent data: **`r month_day_year(nys_date, abbr = TRUE)`**
<br>
Update frequency: **Daily**
<br>
Geographic aggregation: **County (New York State only)**
<br>
Where it's used: **New and total tests, new and total cases, test positivity rate**

<br>

### [Coronavirus (Covid-19) Data in the United States](https://github.com/nytimes/covid-19-data)

*The New York Times*

This dataset includes the number of **cases** and **deaths** due to Covid-19 in the United States. The data is reported by county. It is updated daily and includes all cases and deaths compiled by *Times* journalists by the end of the prior day. The data is based on reports from state and local health agencies across the county and each state may have a slightly different reporting methodology.

For counties in New York State, the *Times* uses data reported by the NYS Department of Health. There is a one-day lag in the NYS data in the *Times* dataset. For example, data counted on December 16 by the New York Times was reported on December 15 by NYS DOH.

Beginning August 6, the [methodology for assigning deaths to counties in New York State was modified](https://github.com/nytimes/covid-19-data/blob/master/NEW-YORK-DEATHS-METHODOLOGY.md). Currently, deaths are assigned to the county of residence. Before August 6, deaths were assigned to county in which the death took place.

Most recent data: **`r month_day_year(nyt_date, abbr = TRUE)`**
<br>
Update frequency: **Daily**
<br>
Geographic aggregation: **County (United States)**
<br>
Where it's used: **New and total deaths, new and total cases (metro area)**

<br>

### [Westchester County COVID-19 Dashboard](https://wcgis.maps.arcgis.com/apps/opsdashboard/index.html#/280339d96db14efd9cc304dba0f3a71d)

*Westchester County Department of Health/GIS*

This dataset includes the number of Covid-19 **cases** in each of the 43 municipalities of Westchester County. It is updated on (most) weekdays and includes all cases in which a positive coronavirus test is associated with a confirmed address in Westchester County. With each update, the County posts the number of new cases, active cases, and total cases per municipality. The number of "active cases" refers the number of positive tests in the past two weeks. 

Often, the data reported by the county differs significantly from the data reported by NYS DOH. Given the lack of information shared by the Westchester County Department of Health about this data, I only use the County data to compare municipalities within Westchester. The data released by the County should not be directly compared to data released by the State or other sources.

Unfortunately, the County does not currently post historical data. From early 
May until Dec 11, the County posted a map on most weekdays to the [WestchesterGov Twitter account](https://twitter.com/westchestergov/status/1336045976981811206). Because of this limitation, I have extracted historical data from the maps that have been posted on Twitter. This extraction process is imperfect but until the county releases more accurate historical data, this is best I can do. Because of the unavailability of this historical data from the County, *extreme caution* should be used when looking at municipal-level trends.

On Dec 23, 2020, the County released a [dashboard](https://wcgis.maps.arcgis.com/apps/opsdashboard/index.html#/280339d96db14efd9cc304dba0f3a71d) that largely contains the same information that was posted on the daily map, with the addition of other metrics reported by New York State. Again, this dashboard does not contain any municipal-level historical data. Each day, I take a snapshot of the data reported on the dashboard to create trends for municipalities.

Given these limitations, I have decided to use the "active cases" metric as rolling 14-day average for most of the municipal-level on this site, as it seems to be the best balance between accuracy and recency If you or anyone you know works for the County, please encourage them to release more detailed historical data!

Most recent data: **`r month_day_year(mun_date, abbr = TRUE)`**
<br>
Update frequency: **Weekdays (usually)**
<br>
Geographic aggregation: **Municipality (Westchester County only)**
<br>
Where it's used: **New and total cases**

<br>

### [COVID-19 Reported Patient Impact and Hospital Capacity by Facility](https://healthdata.gov/dataset/covid-19-reported-patient-impact-and-hospital-capacity-facility)

*United States Department of Health and Human Services*

This dataset includes **capacity** and **utilization** of hospitals in the United States. It is reported on a weekly basis and provides facility-level information such as the number of total inpatient and ICU beds, the number of inpatient and ICU beds currently occupied, and the number of Covid-19 patients currently admitted to each hospital facility.

The data is derived from reports made by hospitals and state health departments to HHS. It includes hospitals registered with the Centers for Medicare & Medicaid Services, but *does not* include psychiatric, rehabilitation, Indian Health Service (IHS) facilities, U.S. Department of Veterans Affairs (VA) facilities, Defense Health Agency (DHA) facilities, and religious non-medical facilities. There is a detailed [community FAQ](https://github.com/CareSet/COVID_Hospital_PUF) about this dataset that was developed by a group of data journalists, data scientists, and healthcare system researchers.

On this site, I use weekly average figures reported by the HHS dataset. In other words, this data is not a snapshot of hospital occupancy on a given day, but rather the average occupancy over the report week.

Hospital metric definitions:

- Covid-19 patients: patients currently hospitalized in an inpatient bed who have laboratory-confirmed or suspected Covid-19, including those in observation beds
- Total beds: staffed inpatient beds including all overflow and active surge/expansion beds used for inpatients (including all designated ICU beds)
- Beds used: staffed inpatient beds that are occupied
- Bed occupancy: beds used divided by total beds
- Total ICU beds: staffed inpatient ICU beds
- ICU beds used: staffed inpatient ICU beds that are occupied
- Bed occupancy: ICU beds used divided by total ICU beds

Most recent data: **`r month_day_year(hosp_date, abbr = TRUE)` -- `r month_day_year(hosp_date + 7, abbr = TRUE)`**
<br>
Update frequency: **Weekly (updates published Mondays)**
<br>
Geographic aggregation: **None (facility-level data, United States)**
<br>
Where it's used: **Hospital capacity, occupancy, Covid-19 patients**

<br>

### [New York State School Covid-19 Report Card](https://schoolcovidreportcard.health.ny.gov/#/home)

*New York State Department of Health/New York Forward*

This dataset includes the number of positive tests reported by each school in New York State. The numbers are broken down by students, teachers, and staff, on-site and off-site. Each school also reports their current teaching model (in-person, hybrid, or remote-only) as well as the number of students and staff currently enrolled on-site or working in school buildings and number of students and staff currently off-site.

The state does not currently publish historical data at the school-level, but rather the total number of cases reported by each school (since Sept 8) and the number of cases in the last 14 days. The data is reported daily by each school to the Department of Health.

The school data presented on this site includes positive cases in students, teachers, and staff that are attending or working in school buildings, and excludes "off-site" cases. 

Most recent data: **`r month_day_year(max(school_geo_cases$date), abbr = TRUE)`**
<br>
Update frequency: **Daily (varies by school)**
<br>
Geographic aggregation: **None (school-level data, New York State)**
<br>
Where it's used: **Cases in schools**

<br>

### [New York State Micro-Cluster Strategy](https://forward.ny.gov/micro-cluster-strategy)

*New York Forward*

The state publishes **geographic boundaries of each micro-cluster** along with recent 7-day average positivity rates for each cluster. Unfortunately, this data is not easily accessible, so I scrape this data on a regular basis from the [state's hot spot address map](https://covidhotspotlookup.health.ny.gov/#/home). The creation and update of zones does not appear to be a on a regular schedule.

Most recent data: **`r month_day_year(max(hotspot$date), abbr = TRUE)`**
<br>
Update frequency: **Daily**
<br>
Geographic aggregation: **None**
<br>
Where it's used: **New York State micro-clusters**

<br>

### [Nursing Home and ACF COVID Related Deaths Statewide](https://www.health.ny.gov/statistics/diseases/covid-19/fatalities_nursing_home_acf.pdf)

*New York State Department of Health*

This dataset includes the cumulative number of confirmed and presumed **Covid-19 deaths at nursing homes** and adult care facilities in New York State. Importantly, it only includes deaths that occurred in nursing home facilities. If a nursing home resident died in a hospital, it is not counted as a nursing home death. Because of this limitation, the number of nursing homes deaths is undercounted in these numbers. There has been [significant](https://www.propublica.org/article/not-mentioned-in-cuomos-coronavirus-book-how-many-nursing-home-residents-died-in-new-york) [press](https://www.washingtonpost.com/health/new-yorks-true-nursing-home-death-toll-cloaked-in-secrecy/2020/08/11/f658ebfe-db8a-11ea-b4f1-25b762cdbbf4_story.html) [coverage](https://apnews.com/article/virus-outbreak-new-york-andrew-cuomo-elections-nursing-homes-5212e305921c250eb6cba4f6f246fc4d) of this issue, and hopefully the state will respond by releasing more detailed information related to Covid-19 in nursing homes.

The number of beds in each nursing home comes from [NYS Health Profiles](https://profiles.health.ny.gov/nursing_home/index).

Most recent data: **`r month_day_year(max(nh_clean$date), abbr = TRUE)`**
<br>
Update frequency: **Daily**
<br>
Geographic aggregation: **None (facility-level data, New York State)**
<br>
Where it's used: **Deaths in nursing homes**

<br>

### [American Community Survey](https://data.census.gov/cedsci/table?q=ACSDT1Y2019.B01003&g=0500000US36119&tid=ACSDT1Y2019.B01003&hidePreview=true)

*US Census Bureau*

To calculate per capita rates of Covid-19, I use estimates of **total population** from the American Community Survey (table B01003). County per capita rates are calculated using 2019 1-year ACS estimates. Municipality rates are calculated using 2015 -- 2019 5-year ACS estimates.

Where it's used: **Per capita case rates**

## Me

This website was built and is maintained by me, [Matt Herman](http://mattherman.info). I live in Katonah, NY. Contact me at [mfherman@gmail.com](mailto:mfherman@gmail.com) with comments, questions, or suggestions.

## Tools, etc.

This website is built using the [Distill framework for R Markdown](https://rstudio.github.io/distill/). All data collection and aggregation is done using the [R programming language](https://www.r-project.org/). The interactive charts are made with [Plotly](https://plotly.com/), maps are made with [Leaflet](https://leafletjs.com/), and tables are made with [DataTables](https://datatables.net/). The static HTML is hosted by [GitHub Pages](https://pages.github.com/).

All source code for downloading and aggregating the data as well as building the website is available on [GitHub](https://github.com/mfherman/westchester-covid).
